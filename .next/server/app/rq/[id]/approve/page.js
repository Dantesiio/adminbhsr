(()=>{var e={};e.id=849,e.ids=[849],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7655:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>o}),t(9510),t(1658),t(5859);var r=t(2052),a=t(4966),i=t(2218),l=t.n(i),d=t(528),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);t.d(s,n);let o=["",{children:["rq",{children:["[id]",{children:["approve",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9510)),"/Users/daviddonneys/Documents/BarcoHospitalHSR/don-diego-app/src/app/rq/[id]/approve/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,1658)),"/Users/daviddonneys/Documents/BarcoHospitalHSR/don-diego-app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5859,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/daviddonneys/Documents/BarcoHospitalHSR/don-diego-app/src/app/rq/[id]/approve/page.tsx"],x="/rq/[id]/approve/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/rq/[id]/approve/page",pathname:"/rq/[id]/approve",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},4935:(e,s,t)=>{Promise.resolve().then(t.bind(t,6313))},6313:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var r=t(5909),a=t(6665),i=t(6396),l=t(6963),d=t(9083),n=t(6452);function o({params:e}){let s=(0,l.useRouter)(),t=(0,l.useSearchParams)().get("role")||"AUTORIZADOR",[o,c]=(0,a.useState)(null),[x,m]=(0,a.useState)(!0),[p,u]=(0,a.useState)(""),[h,g]=(0,a.useState)(!1),b=async e=>{if(!p.trim()){alert("Por favor agregue un comentario");return}g(!0);try{await new Promise(e=>setTimeout(e,600)),alert("APROBADA"===e?"Requisici\xf3n aprobada":"Requisici\xf3n rechazada"),s.push(`/dashboard?role=${t}`)}catch(e){console.error("Error processing approval:",e),alert("Ocurri\xf3 un error al registrar la decisi\xf3n")}finally{g(!1)}};if(x)return r.jsx(i.default,{currentRole:t,children:r.jsx("div",{className:"flex h-64 items-center justify-center text-gray-500",children:"Cargando..."})});if(!o)return r.jsx(i.default,{currentRole:t,children:r.jsx("div",{className:"text-center text-gray-500",children:"Requisici\xf3n no encontrada"})});let f=(0,n.pd)(o.status);return r.jsx(i.default,{currentRole:t,children:(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("header",{className:"rounded-3xl bg-gradient-to-r from-orange-500 via-red-500 to-rose-500 p-8 text-white shadow-lg",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.4em] text-white/70",children:"Autorizaci\xf3n"}),r.jsx("h1",{className:"mt-2 text-3xl font-bold leading-tight",children:"Revisar y aprobar RQ"}),(0,r.jsxs)("p",{className:"mt-2 max-w-2xl text-sm text-white/80",children:[o.code," â€¢ ",o.project.name]}),f&&r.jsx("p",{className:"mt-1 max-w-xl text-xs text-white/70",children:f.description})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsx("button",{onClick:()=>s.push(`/rq/${e.id}?role=${t}`),className:"inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-5 py-2 text-sm font-semibold text-white transition hover:bg-white/20",children:"Ver detalles completos"}),r.jsx("button",{onClick:()=>s.push(`/dashboard?role=${t}`),className:"inline-flex items-center gap-2 rounded-full bg-white px-5 py-2 text-sm font-semibold text-red-600 shadow hover:shadow-lg",children:"Volver al dashboard"})]})]}),r.jsx("div",{className:"mt-6",children:r.jsx(d.N,{currentStatus:o.status,compact:!0})})]}),(0,r.jsxs)("section",{className:"grid gap-6 lg:grid-cols-[2fr_1fr]",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[r.jsx("h2",{className:"mb-4 text-lg font-medium text-slate-900",children:"Resumen de la requisici\xf3n"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Proyecto"}),r.jsx("p",{className:"text-sm text-gray-900",children:o.project.name})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Solicitante"}),r.jsx("p",{className:"text-sm text-gray-900",children:o.requester.name})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Proveedor recomendado"}),r.jsx("p",{className:"text-sm text-gray-900",children:o.comparison?.chosen?.name??"N/A"})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Valor total estimado"}),(0,r.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:[o.currency," ",o.total?.toLocaleString("es-CO")]})]})]}),o.description&&(0,r.jsxs)("div",{className:"mt-4",children:[r.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Descripci\xf3n"}),r.jsx("p",{className:"text-sm text-gray-900",children:o.description})]})]}),(0,r.jsxs)("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[r.jsx("h2",{className:"mb-4 text-lg font-medium text-slate-900",children:"Lista de verificaci\xf3n"}),r.jsx("div",{className:"space-y-3",children:[{label:"Presupuesto disponible",description:"Validar que el proyecto tiene recursos suficientes para la compra"},{label:"Justificaci\xf3n adecuada",description:"Confirmar que la necesidad y el proveedor seleccionado est\xe1n bien soportados"},{label:"Proveedor calificado",description:"Verificar antecedentes, cumplimiento de auditor\xedas y documentos al d\xeda"},{label:"Precios de mercado",description:"Comparar contra hist\xf3rico y cotizaciones alternativas"}].map(e=>(0,r.jsxs)("label",{className:"flex items-start space-x-3 rounded-2xl border border-slate-200 p-3",children:[r.jsx("input",{type:"checkbox",className:"mt-1 h-4 w-4 rounded border-gray-300 text-red-500 focus:ring-red-400"}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:e.label}),r.jsx("div",{className:"text-sm text-gray-500",children:e.description})]})]},e.label))})]}),(0,r.jsxs)("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[r.jsx("h2",{className:"mb-4 text-lg font-medium text-slate-900",children:"Decisi\xf3n de autorizaci\xf3n"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"approvalComment",className:"mb-2 block text-sm font-medium text-gray-700",children:"Comentarios de la autorizaci\xf3n *"}),r.jsx("textarea",{id:"approvalComment",value:p,onChange:e=>u(e.target.value),className:"h-24 w-full rounded-md border px-3 py-2",placeholder:"Agregue sus comentarios sobre la autorizaci\xf3n...",required:!0})]}),(0,r.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[r.jsx("button",{type:"button",onClick:()=>b("APROBADA"),disabled:h||!p.trim(),className:"flex items-center justify-center gap-2 rounded-xl bg-green-600 px-4 py-3 text-sm font-semibold text-white transition hover:bg-green-700 disabled:cursor-not-allowed disabled:bg-gray-400",children:h?"Procesando...":"Aprobar RQ"}),r.jsx("button",{type:"button",onClick:()=>b("RECHAZADA"),disabled:h||!p.trim(),className:"flex items-center justify-center gap-2 rounded-xl bg-red-600 px-4 py-3 text-sm font-semibold text-white transition hover:bg-red-700 disabled:cursor-not-allowed disabled:bg-gray-400",children:h?"Procesando...":"Rechazar RQ"})]})]})]})]}),(0,r.jsxs)("aside",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"rounded-3xl border border-white/20 bg-white/40 p-6 text-sm text-white shadow backdrop-blur",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.2), rgba(255,255,255,0.05))"},children:[r.jsx("h3",{className:"text-sm font-semibold uppercase tracking-widest text-white",children:"Resumen ejecutivo"}),r.jsx("p",{className:"mt-3 text-xs leading-relaxed text-white/80",children:"Revisa montos, el proveedor recomendado y los documentos soporte. Si tienes dudas, deja comentarios claros para el equipo de Compras."})]}),(0,r.jsxs)("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 text-sm text-slate-600 shadow-sm",children:[r.jsx("h3",{className:"text-sm font-semibold uppercase tracking-widest text-slate-500",children:"Documentos clave"}),(0,r.jsxs)("ul",{className:"mt-3 space-y-2",children:[(0,r.jsxs)("li",{className:"flex items-center justify-between rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2",children:[r.jsx("span",{className:"text-xs font-semibold text-slate-700",children:"Comparativo.pdf"}),r.jsx("button",{className:"text-xs font-semibold text-blue-600 transition hover:text-blue-800",children:"Ver"})]}),(0,r.jsxs)("li",{className:"flex items-center justify-between rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2",children:[r.jsx("span",{className:"text-xs font-semibold text-slate-700",children:"Cotizaci\xf3n Proveedor A"}),r.jsx("button",{className:"text-xs font-semibold text-blue-600 transition hover:text-blue-800",children:"Ver"})]})]})]})]})]})]})})}},9083:(e,s,t)=>{"use strict";t.d(s,{N:()=>l});var r=t(5909);let a=function(){for(var e,s,t=0,r="",a=arguments.length;t<a;t++)(e=arguments[t])&&(s=function e(s){var t,r,a="";if("string"==typeof s||"number"==typeof s)a+=s;else if("object"==typeof s){if(Array.isArray(s)){var i=s.length;for(t=0;t<i;t++)s[t]&&(r=e(s[t]))&&(a&&(a+=" "),a+=r)}else for(r in s)s[r]&&(a&&(a+=" "),a+=r)}return a}(e))&&(r&&(r+=" "),r+=s);return r};var i=t(6452);function l({currentStatus:e,compact:s=!1}){let t=(0,i.Pe)(),l=function(e){if(!e)return -1;let s=e.toUpperCase(),t=i.bW.indexOf(s);return t>=0?t:"RECHAZADA"===s?i.bW.indexOf("EN_AUTORIZACION"):-1}(e),d=e?.toUpperCase()==="RECHAZADA";return(0,r.jsxs)("div",{className:a("space-y-4",s&&"space-y-2"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Flujo del proceso"}),r.jsx("p",{className:"text-xs text-gray-500",children:e?`Estado actual: ${e.replace(/_/g," ")}`:"Sin estado asignado"})]}),0===t.length?(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs font-medium text-green-700 bg-green-100 px-2 py-1 rounded-full",children:[r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Flujo validado"]}):(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs font-medium text-red-700 bg-red-100 px-2 py-1 rounded-full",children:[r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01M12 5a7 7 0 100 14 7 7 0 000-14z"})}),"Flujo requiere ajustes"]})]}),r.jsx("div",{className:a("max-w-full overflow-x-auto pb-1 [-ms-overflow-style:none] [scrollbar-width:none] [&::-webkit-scrollbar]:hidden"),children:r.jsx("div",{className:a("relative flex flex-col md:flex-row md:flex-wrap",s?"gap-3 md:gap-4":"gap-4 md:gap-6"),children:i.bW.map((e,t)=>{let n=i.A9[e],o=l>t,c=l===t&&!d;return(0,r.jsxs)("div",{className:a("flex-1 min-w-[140px] md:flex-[1_1_180px]"),children:[(0,r.jsxs)("div",{className:a("flex items-center gap-3 rounded-2xl border px-4 py-3 shadow-sm transition-colors",c&&"border-blue-500 bg-blue-50 text-blue-900 shadow",o&&!c&&"border-green-500 bg-green-50 text-green-900",!c&&!o&&"border-gray-200 bg-white text-gray-600"),children:[r.jsx("div",{className:a("flex h-10 w-10 items-center justify-center rounded-full border-2 text-sm font-semibold",c&&"border-blue-500 bg-blue-100 text-blue-700",o&&!c&&"border-green-500 bg-green-100 text-green-700",!c&&!o&&"border-gray-200 bg-gray-100 text-gray-500"),children:t+1}),(0,r.jsxs)("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider",children:n.label}),r.jsx("span",{className:"text-[11px] text-gray-500",children:n.actor})]})]}),r.jsx("p",{className:a("mt-2 text-xs leading-relaxed text-gray-500",s&&"hidden md:block"),children:n.description}),d&&"EN_AUTORIZACION"===e&&(0,r.jsxs)("div",{className:"mt-2 inline-flex items-center gap-2 rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-xs text-red-700",children:[r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636a9 9 0 11-12.728 0 9 9 0 0112.728 0zM9 9l6 6m0-6l-6 6"})}),"Rechazada - volver a Compras"]})]},e)})})}),t.length>0&&(0,r.jsxs)("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-xs text-red-700",children:[r.jsx("p",{className:"font-semibold mb-1",children:"Inconsistencias detectadas en el workflow:"}),r.jsx("ul",{className:"list-disc pl-5 space-y-1",children:t.map(e=>r.jsx("li",{children:e},e))})]})]})}},9510:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(6018).createProxy)(String.raw`/Users/daviddonneys/Documents/BarcoHospitalHSR/don-diego-app/src/app/rq/[id]/approve/page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[700,217,94,667],()=>t(7655));module.exports=r})();