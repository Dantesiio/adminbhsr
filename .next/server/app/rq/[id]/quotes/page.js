(()=>{var e={};e.id=716,e.ids=[716],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2605:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>d}),t(1470),t(1658),t(5859);var r=t(2052),a=t(4966),l=t(2218),i=t.n(l),o=t(528),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);t.d(s,n);let d=["",{children:["rq",{children:["[id]",{children:["quotes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1470)),"/Users/daviddonneys/Documents/BarcoHospitalHSR/don-diego-app/src/app/rq/[id]/quotes/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,1658)),"/Users/daviddonneys/Documents/BarcoHospitalHSR/don-diego-app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5859,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/daviddonneys/Documents/BarcoHospitalHSR/don-diego-app/src/app/rq/[id]/quotes/page.tsx"],x="/rq/[id]/quotes/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/rq/[id]/quotes/page",pathname:"/rq/[id]/quotes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7468:(e,s,t)=>{Promise.resolve().then(t.bind(t,1608))},1608:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var r=t(5909),a=t(6665),l=t(6396),i=t(6963),o=t(9083),n=t(6452);function d({params:e}){let s=(0,i.useRouter)(),t=(0,i.useSearchParams)().get("role")||"COMPRAS",[d,c]=(0,a.useState)(null),[x,m]=(0,a.useState)([]),[p,u]=(0,a.useState)([]),[h,b]=(0,a.useState)(!0),[g,j]=(0,a.useState)(!1);if((0,a.useCallback)(async()=>{try{b(!0),await new Promise(e=>setTimeout(e,200)),c({id:e.id,code:"RQ-0001",title:"Compra de bolsas",description:"Bolsas para proyecto ECHO",status:"EN_COMPARATIVO",items:[{id:"1",name:"Bolsa 20x30",spec:"Polietileno",qty:1e3,uom:"unidad"},{id:"2",name:"Bolsa 30x40",spec:"Polietileno",qty:500,uom:"unidad"}],project:{name:"ECHO Bolsas 06/2025"}}),m([{id:"1",name:"Proveedor A",nit:"123456789",email:"contacto@proveedora.com"},{id:"2",name:"Proveedor B",nit:"987654321",email:"ventas@proveedorb.com"},{id:"3",name:"Proveedor C",nit:"456789123",email:"cotizaciones@proveedorc.com"}]),u([])}catch(e){console.error("Error loading data:",e)}finally{b(!1)}},[e.id]),h)return r.jsx(l.default,{currentRole:t,children:r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"text-gray-500",children:"Cargando..."})})});if(!d)return r.jsx(l.default,{currentRole:t,children:r.jsx("div",{className:"text-center text-gray-500",children:"RQ no encontrada"})});let f=(0,n.pd)(d.status);return r.jsx(l.default,{currentRole:t,children:(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("header",{className:"rounded-3xl bg-gradient-to-r from-blue-600 via-blue-500 to-indigo-500 p-8 text-white shadow-lg",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.4em] text-white/70",children:"Compras"}),r.jsx("h1",{className:"mt-2 text-3xl font-bold leading-tight",children:"Gestionar Cotizaciones"}),(0,r.jsxs)("p",{className:"mt-2 max-w-2xl text-sm text-white/80",children:[d.code," â€¢ ",d.project.name]}),f&&r.jsx("p",{className:"mt-1 text-xs text-white/70 max-w-xl",children:f.description})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,r.jsxs)("button",{onClick:()=>j(!0),className:"inline-flex items-center gap-2 rounded-full bg-white px-5 py-2 text-sm font-semibold text-blue-600 shadow hover:shadow-lg",children:[r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Solicitar Cotizaci\xf3n"]}),p.length>=2&&(0,r.jsxs)("button",{onClick:()=>{if(p.length<2){alert("Se necesitan al menos 2 cotizaciones para crear un comparativo");return}alert("Comparativo creado exitosamente"),s.push(`/rq/${e.id}?role=${t}`)},className:"inline-flex items-center gap-2 rounded-full border border-white/40 bg-white/10 px-5 py-2 text-sm font-semibold text-white transition hover:bg-white/20",children:[r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m2 6H7a2 2 0 01-2-2V8a2 2 0 012-2h5l2 2h6a2 2 0 012 2v6a2 2 0 01-2 2z"})}),"Crear Comparativo"]})]})]}),r.jsx("div",{className:"mt-6",children:r.jsx(o.N,{currentStatus:d.status,compact:!0})})]}),(0,r.jsxs)("section",{className:"grid gap-6 lg:grid-cols-[2fr_1fr]",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[r.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"\xcdtems a Cotizar"}),r.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Valida cantidades y especificaciones antes de solicitar al proveedor."}),r.jsx("div",{className:"mt-4 overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Producto"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Especificaci\xf3n"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Cantidad"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Unidad"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.items.map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.spec||"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.qty}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.uom||"unidad"})]},e.id))})]})})]}),(0,r.jsxs)("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Cotizaciones Recibidas"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Registra m\xednimo dos para habilitar el comparativo."})]}),(0,r.jsxs)("div",{className:"rounded-full bg-blue-50 px-3 py-1 text-xs font-semibold text-blue-700",children:[p.length," recibidas"]})]}),0===p.length?r.jsx("div",{className:"mt-6 rounded-2xl border border-dashed border-blue-200 bg-blue-50/60 p-8 text-center text-sm text-blue-700",children:'A\xfan no se registran cotizaciones. Usa el bot\xf3n "Solicitar Cotizaci\xf3n" para comenzar.'}):r.jsx("div",{className:"mt-6 space-y-4",children:p.map(e=>r.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:e.supplier?.name}),e.notes&&r.jsx("p",{className:"mt-1 text-xs text-slate-600",children:e.notes})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-lg font-bold text-slate-900",children:[e.currency," ",e.total?.toLocaleString("es-CO")]}),(0,r.jsxs)("p",{className:"text-xs text-slate-500",children:["Recibida ",new Date(e.createdAt).toLocaleDateString("es-CO")]})]})]})},e.id))})]})]}),(0,r.jsxs)("aside",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"rounded-3xl border border-blue-100 bg-blue-50 p-6 text-sm text-blue-900 shadow-sm",children:[r.jsx("h3",{className:"text-sm font-semibold uppercase tracking-widest text-blue-700",children:"Checklist del comprador"}),(0,r.jsxs)("ul",{className:"mt-3 space-y-2",children:[(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[r.jsx("svg",{className:"mt-1 h-4 w-4 flex-shrink-0 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Confirma que los proveedores recibieron la solicitud."]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[r.jsx("svg",{className:"mt-1 h-4 w-4 flex-shrink-0 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Revisa que los precios incluyan impuestos y condiciones de entrega."]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[r.jsx("svg",{className:"mt-1 h-4 w-4 flex-shrink-0 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Adjunta documentos o certificaciones entregados por el proveedor."]})]})]}),(0,r.jsxs)("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 text-sm text-slate-600 shadow-sm",children:[r.jsx("h3",{className:"text-sm font-semibold uppercase tracking-widest text-slate-500",children:"Proveedores disponibles"}),r.jsx("div",{className:"mt-3 space-y-3",children:x.map(e=>(0,r.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-3",children:[r.jsx("p",{className:"text-sm font-semibold text-slate-900",children:e.name}),(0,r.jsxs)("p",{className:"text-xs text-slate-500",children:[e.email||"Sin correo"," â€¢ ",e.phone||"Sin tel\xe9fono"]})]},e.id))})]})]})]}),g&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[r.jsx("h3",{className:"text-lg font-medium mb-4",children:"Solicitar Cotizaci\xf3n"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"quoteSupplier",className:"block text-sm font-medium text-gray-700 mb-1",children:"Seleccionar Proveedor"}),(0,r.jsxs)("select",{id:"quoteSupplier",className:"w-full border rounded-md px-3 py-2",children:[r.jsx("option",{value:"",children:"Seleccione un proveedor..."}),x.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," - ",e.nit]},e.id))]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"quoteNotes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas adicionales"}),r.jsx("textarea",{id:"quoteNotes",className:"w-full border rounded-md px-3 py-2 rows-3",placeholder:"Notas para el proveedor..."})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2 mt-6",children:[r.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-gray-600 border rounded-md hover:bg-gray-50",children:"Cancelar"}),r.jsx("button",{onClick:()=>{alert("Solicitud de cotizaci\xf3n enviada"),j(!1)},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Enviar Solicitud"})]})]})})]})})}},9083:(e,s,t)=>{"use strict";t.d(s,{N:()=>i});var r=t(5909);let a=function(){for(var e,s,t=0,r="",a=arguments.length;t<a;t++)(e=arguments[t])&&(s=function e(s){var t,r,a="";if("string"==typeof s||"number"==typeof s)a+=s;else if("object"==typeof s){if(Array.isArray(s)){var l=s.length;for(t=0;t<l;t++)s[t]&&(r=e(s[t]))&&(a&&(a+=" "),a+=r)}else for(r in s)s[r]&&(a&&(a+=" "),a+=r)}return a}(e))&&(r&&(r+=" "),r+=s);return r};var l=t(6452);function i({currentStatus:e,compact:s=!1}){let t=(0,l.Pe)(),i=function(e){if(!e)return -1;let s=e.toUpperCase(),t=l.bW.indexOf(s);return t>=0?t:"RECHAZADA"===s?l.bW.indexOf("EN_AUTORIZACION"):-1}(e),o=e?.toUpperCase()==="RECHAZADA";return(0,r.jsxs)("div",{className:a("space-y-4",s&&"space-y-2"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Flujo del proceso"}),r.jsx("p",{className:"text-xs text-gray-500",children:e?`Estado actual: ${e.replace(/_/g," ")}`:"Sin estado asignado"})]}),0===t.length?(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs font-medium text-green-700 bg-green-100 px-2 py-1 rounded-full",children:[r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Flujo validado"]}):(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs font-medium text-red-700 bg-red-100 px-2 py-1 rounded-full",children:[r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01M12 5a7 7 0 100 14 7 7 0 000-14z"})}),"Flujo requiere ajustes"]})]}),r.jsx("div",{className:a("max-w-full overflow-x-auto pb-1 [-ms-overflow-style:none] [scrollbar-width:none] [&::-webkit-scrollbar]:hidden"),children:r.jsx("div",{className:a("relative flex flex-col md:flex-row md:flex-wrap",s?"gap-3 md:gap-4":"gap-4 md:gap-6"),children:l.bW.map((e,t)=>{let n=l.A9[e],d=i>t,c=i===t&&!o;return(0,r.jsxs)("div",{className:a("flex-1 min-w-[140px] md:flex-[1_1_180px]"),children:[(0,r.jsxs)("div",{className:a("flex items-center gap-3 rounded-2xl border px-4 py-3 shadow-sm transition-colors",c&&"border-blue-500 bg-blue-50 text-blue-900 shadow",d&&!c&&"border-green-500 bg-green-50 text-green-900",!c&&!d&&"border-gray-200 bg-white text-gray-600"),children:[r.jsx("div",{className:a("flex h-10 w-10 items-center justify-center rounded-full border-2 text-sm font-semibold",c&&"border-blue-500 bg-blue-100 text-blue-700",d&&!c&&"border-green-500 bg-green-100 text-green-700",!c&&!d&&"border-gray-200 bg-gray-100 text-gray-500"),children:t+1}),(0,r.jsxs)("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider",children:n.label}),r.jsx("span",{className:"text-[11px] text-gray-500",children:n.actor})]})]}),r.jsx("p",{className:a("mt-2 text-xs leading-relaxed text-gray-500",s&&"hidden md:block"),children:n.description}),o&&"EN_AUTORIZACION"===e&&(0,r.jsxs)("div",{className:"mt-2 inline-flex items-center gap-2 rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-xs text-red-700",children:[r.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636a9 9 0 11-12.728 0 9 9 0 0112.728 0zM9 9l6 6m0-6l-6 6"})}),"Rechazada - volver a Compras"]})]},e)})})}),t.length>0&&(0,r.jsxs)("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-xs text-red-700",children:[r.jsx("p",{className:"font-semibold mb-1",children:"Inconsistencias detectadas en el workflow:"}),r.jsx("ul",{className:"list-disc pl-5 space-y-1",children:t.map(e=>r.jsx("li",{children:e},e))})]})]})}},1470:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(6018).createProxy)(String.raw`/Users/daviddonneys/Documents/BarcoHospitalHSR/don-diego-app/src/app/rq/[id]/quotes/page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[700,217,94,667],()=>t(2605));module.exports=r})();