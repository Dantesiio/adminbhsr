(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{3428:function(e,t,s){Promise.resolve().then(s.bind(s,5062))},5062:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var a=s(8947),r=s(3081),i=s(6834),l=s(9045),n=s(4848),o=s(1518),c=s(3537);let d={blue:"from-sky-500/30 via-blue-500/20 to-indigo-500/30",emerald:"from-emerald-500/30 via-teal-500/20 to-green-500/30",amber:"from-amber-500/30 via-orange-500/20 to-yellow-500/30",violet:"from-violet-500/30 via-purple-500/20 to-indigo-500/30",rose:"from-rose-500/30 via-red-500/20 to-pink-500/30"},u={SOLICITANTE:"bg-blue-100 text-blue-700",COMPRAS:"bg-amber-100 text-amber-700",AUTORIZADOR:"bg-violet-100 text-violet-700",ADMIN:"bg-emerald-100 text-emerald-700"},x={SOLICITANTE:{title:"Checklist del solicitante",subtitle:"Prepara documentaci\xf3n, da seguimiento y responde comentarios sin demoras.",steps:[{title:"Prepara la requisici\xf3n",description:"Confirma proyecto y centro de costo, adjunta soportes y valida cantidades clave."},{title:"Env\xeda a Compras",description:"Monitorea la bandeja y conversa con Compras cuando necesiten aclaraciones."},{title:"Atiende ajustes",description:"Si se rechaza, revisa comentarios, ajusta y reenv\xeda para mantener el flujo activo."}],cta:{label:"Crear nueva RQ",href:"/rq/new"}},COMPRAS:{title:"Flujo de compras",subtitle:"Gestiona cotizaciones, arma comparativos y comunica el avance del proceso.",steps:[{title:"Clasifica la solicitud",description:"Valida la informaci\xf3n del solicitante y prioriza seg\xfan criticidad y monto."},{title:"Captura cotizaciones",description:"Carga propuestas con soporte, eval\xfaa condiciones y arma el comparativo ganador."},{title:"Env\xeda a autorizaci\xf3n",description:"Comparte comentarios clave y asegura que los autorizadores reciban toda la evidencia."}]},AUTORIZADOR:{title:"Ruta del autorizador",subtitle:"Eval\xfaa comparativos, verifica presupuesto y deja rastro de decisiones claras.",steps:[{title:"Revisa el comparativo",description:"Analiza precios, justificaci\xf3n y cumplimiento de pol\xedticas antes de decidir."},{title:"Valida presupuesto",description:"Confirma disponibilidad y prioridades del proyecto o centro de costo."},{title:"Aprueba o devuelve",description:"Aprueba cuando cumple criterios o rechaza con comentarios accionables."}]},ADMIN:{title:"Control administrativo",subtitle:"Monitorea indicadores, anticipa bloqueos y asegura cierres trazables.",steps:[{title:"Monitorea indicadores",description:"Revisa tiempos por etapa y prioriza incidencias junto a Compras."},{title:"Acompa\xf1a incidencias",description:"Facilita soporte para requisiciones detenidas y alinea a los equipos."},{title:"Cierra el ciclo",description:"Documenta cierres, asegura adjuntos completos y genera reportes ejecutivos."}]}};function m(){var e,t;let s;let m=(0,i.useRouter)(),p=(0,i.useSearchParams)(),[h,b]=(0,r.useState)([]),[g,f]=(0,r.useState)([]),[A,j]=(0,r.useState)({}),[v,N]=(0,r.useState)([]),[C,R]=(0,r.useState)(),[O,w]=(0,r.useState)(0),[y,E]=(0,r.useState)(!0),I=(p.get("role")||"COMPRAS").toUpperCase(),D=p.get("status")||"",P=p.get("project")||"",T=parseInt(p.get("page")||"1"),_=(0,r.useCallback)(async()=>{E(!0);try{var e;let t=new Date,s=[{id:"1",code:"RQ-0001",title:"Compra de bolsas quir\xfargicas",status:"ENVIADA_COMPRAS",createdAt:new Date(t.getTime()-5184e5),project:"Unidad Quir\xfargica 2025",amount:215e4,currency:"COP",requester:"Log\xedstica HSR"},{id:"2",code:"RQ-0002",title:"Material de curaci\xf3n",status:"EN_COMPARATIVO",createdAt:new Date(t.getTime()-3456e5),project:"Hospitalizaci\xf3n General",amount:89e4,currency:"COP",requester:"Centro Log\xedstico"},{id:"3",code:"RQ-0003",title:"Equipos de laboratorio",status:"EN_AUTORIZACION",createdAt:new Date(t.getTime()-1728e5),project:"Laboratorio Cl\xednico",amount:145e5,currency:"COP",requester:"Investigaci\xf3n HSR"},{id:"4",code:"RQ-0004",title:"Servicio de mantenimiento equipos RX",status:"APROBADA",createdAt:new Date(t.getTime()-864e5),project:"Imagenolog\xeda",amount:38e5,currency:"COP",requester:"Ingenier\xeda Cl\xednica"},{id:"5",code:"RQ-0005",title:"Compra de nebulizadores pedi\xe1tricos",status:"OC_EMITIDA",createdAt:new Date(t.getTime()-288e5),project:"Pediatr\xeda",amount:56e5,currency:"COP",requester:"Piso 4"},{id:"6",code:"RQ-0006",title:"Reposici\xf3n de medicamentos alto costo",status:"EN_RECEPCION",createdAt:new Date(t.getTime()-18e5),project:"Farmacia",amount:32e6,currency:"COP",requester:"Tesorer\xeda"},{id:"7",code:"RQ-0007",title:"Contrato de esterilizaci\xf3n externa",status:"CERRADA",createdAt:new Date(t.getTime()-12096e5),project:"Central de Esterilizaci\xf3n",amount:98e5,currency:"COP",requester:"Compras Estrat\xe9gicas"},{id:"8",code:"RQ-0008",title:"Actualizar licencias software diagn\xf3stico",status:"RECHAZADA",createdAt:new Date(t.getTime()-432e5),project:"Sistemas HSR",amount:42e5,currency:"COP",requester:"TI Hospital"}];"COMPRAS"===I?s=s.filter(e=>["ENVIADA_COMPRAS","EN_COMPARATIVO","EN_AUTORIZACION"].includes(e.status)):"SOLICITANTE"===I?s=s.filter(e=>["ENVIADA_COMPRAS","EN_COMPARATIVO","EN_AUTORIZACION","APROBADA","RECHAZADA","OC_EMITIDA","CERRADA"].includes(e.status)):"AUTORIZADOR"===I&&(s=s.filter(e=>["EN_AUTORIZACION","APROBADA","RECHAZADA"].includes(e.status)));let a=s.reduce((e,t)=>(e[t.status]=(e[t.status]||0)+1,e),{});f(s),j(a);let r=Array.from(new Set(s.map(e=>e.project))).sort((e,t)=>e.localeCompare(t,"es-CO"));N(r);let i=s.filter(e=>(!D||e.status===D)&&(!P||e.project===P)),l=[...s].sort((e,t)=>{let s=c.bW.indexOf(e.status),a=c.bW.indexOf(t.status);return(-1===s?999:s)-(-1===a?999:a)});R(null===(e=l[0])||void 0===e?void 0:e.status),b(i.slice((T-1)*10,10*T)),w(i.length)}catch(e){console.error("Error fetching dashboard data:",e)}finally{E(!1)}},[I,D,P,T]);(0,r.useEffect)(()=>{_()},[_]);let M=(e,t)=>{let s=new URLSearchParams(p);t?s.set(e,t):s.delete(e),s.delete("page"),m.push("/dashboard?".concat(s))},k=e=>({DRAFT:"bg-gray-100 text-gray-800",ENVIADA_COMPRAS:"bg-blue-100 text-blue-800",EN_COMPARATIVO:"bg-yellow-100 text-yellow-800",EN_AUTORIZACION:"bg-orange-100 text-orange-800",APROBADA:"bg-green-100 text-green-800",RECHAZADA:"bg-red-100 text-red-800",OC_EMITIDA:"bg-purple-100 text-purple-800",EN_RECEPCION:"bg-indigo-100 text-indigo-800",CERRADA:"bg-gray-100 text-gray-800"})[e]||"bg-gray-100 text-gray-800",S=(e,t,s)=>"COMPRAS"===s&&["ENVIADA_COMPRAS","EN_COMPARATIVO"].includes(t)?(0,a.jsx)(n.default,{href:"/rq/".concat(e,"/quotes?role=").concat(s),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Gestionar Cotizaciones"}):"AUTORIZADOR"===s&&"EN_AUTORIZACION"===t?(0,a.jsx)(n.default,{href:"/rq/".concat(e,"/approve?role=").concat(s),className:"text-green-600 hover:text-green-800 font-medium",children:"Revisar"}):"SOLICITANTE"===s&&"RECHAZADA"===t?(0,a.jsx)(n.default,{href:"/rq/".concat(e,"?role=").concat(s),className:"text-red-600 hover:text-red-800 font-medium",children:"Ver comentarios"}):(0,a.jsx)(n.default,{href:"/rq/".concat(e,"?role=").concat(s),className:"text-gray-600 hover:text-gray-800 font-medium",children:"Ver Detalles"}),q=Math.ceil(O/10),Z=(0,r.useMemo)(()=>{let e=e=>e.reduce((e,t)=>{var s;return e+(null!==(s=A[t])&&void 0!==s?s:0)},0);switch(I){case"SOLICITANTE":return[{label:"Seguimiento activo",value:e(["ENVIADA_COMPRAS","EN_COMPARATIVO","EN_AUTORIZACION"]),hint:"RQs en movimiento con Compras o Autorizaci\xf3n.",accent:"blue"},{label:"Listas para cerrar",value:e(["APROBADA","OC_EMITIDA","EN_RECEPCION","CERRADA"]),hint:"Listas para OC, recepci\xf3n o cierre definitivo.",accent:"emerald"},{label:"Requieren ajustes",value:e(["RECHAZADA"]),hint:"Devueltas con comentarios pendientes.",accent:"rose"}];case"COMPRAS":return[{label:"Por cotizar",value:e(["ENVIADA_COMPRAS"]),hint:"Requisiciones reci\xe9n recibidas.",accent:"blue"},{label:"En comparativo",value:e(["EN_COMPARATIVO"]),hint:"Evaluando proveedores y costos.",accent:"amber"},{label:"Esperando autorizaci\xf3n",value:e(["EN_AUTORIZACION"]),hint:"Enviadas a firma y seguimiento.",accent:"violet"}];case"AUTORIZADOR":return[{label:"Pendientes por revisar",value:e(["EN_AUTORIZACION"]),hint:"Comparativos listos para decisi\xf3n.",accent:"amber"},{label:"Autorizadas",value:e(["APROBADA"]),hint:"Decisiones positivas recientes.",accent:"emerald"},{label:"Devueltas",value:e(["RECHAZADA"]),hint:"Solicitudes que requieren ajustes.",accent:"rose"}];default:return[{label:"Procesos activos",value:e(["ENVIADA_COMPRAS","EN_COMPARATIVO","EN_AUTORIZACION","APROBADA","OC_EMITIDA","EN_RECEPCION"]),hint:"Flujos en curso dentro del ciclo.",accent:"blue"},{label:"Cerradas",value:e(["CERRADA"]),hint:"Requisiciones concluidas.",accent:"emerald"},{label:"Incidencias",value:e(["RECHAZADA"]),hint:"Requieren soporte o seguimiento.",accent:"rose"}]}},[I,A]),z=(0,r.useMemo)(()=>g.length?[...g].sort((e,t)=>{let s=c.bW.indexOf(e.status),a=c.bW.indexOf(t.status),r=-1===s?Number.MAX_SAFE_INTEGER:s,i=-1===a?Number.MAX_SAFE_INTEGER:a;return r===i?t.createdAt.getTime()-e.createdAt.getTime():r-i}).slice(0,3):[],[g]),L=(0,r.useMemo)(()=>(0,c.g0)(I),[I]),V=x[I],U={SOLICITANTE:{headline:"Seguimiento de requisiciones",sub:"Mant\xe9n la comunicaci\xf3n con Compras y responde ajustes r\xe1pidamente."},COMPRAS:{headline:"Bandeja de compras",sub:"Prioriza RQs entrantes, asegura comparativos completos y comunica avances."},AUTORIZADOR:{headline:"Autorizaciones pendientes",sub:"Revisa comparativos y deja comentarios claros para el equipo."},ADMIN:{headline:"Visi\xf3n general del flujo",sub:"Monitorea el estado de cada RQ y asegura cumplimiento del proceso."}},H=(T-1)*10+1,W=Math.min(10*T,O),B="dashboard-status-filter",F="dashboard-project-filter";return s=y?(0,a.jsx)("div",{className:"flex items-center justify-center rounded-2xl border border-slate-200 bg-white p-12 text-slate-500",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-blue-500 border-t-transparent"}),"Cargando bandeja..."]})}):h.length>0?(0,a.jsx)("div",{className:"space-y-4",children:h.map(e=>{let t=c.bW.indexOf(e.status),s=-1===t?0:Math.round((t+1)/c.bW.length*100);return(0,a.jsxs)("article",{className:"relative overflow-hidden rounded-3xl border border-slate-200 bg-white p-6 shadow-sm transition hover:border-blue-200 hover:shadow-lg",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-widest text-slate-500",children:e.code}),(0,a.jsx)("span",{className:"inline-flex items-center rounded-full px-3 py-1 text-[11px] font-semibold ".concat(k(e.status)),children:e.status.replace(/_/g," ")})]}),(0,a.jsx)("h3",{className:"mt-1 text-xl font-semibold text-slate-900",children:e.title}),(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:[e.requester," â€¢ ",e.project]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-widest text-slate-400",children:"Monto estimado"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-slate-900",children:[e.currency," ",e.amount.toLocaleString("es-CO")]}),(0,a.jsxs)("p",{className:"mt-1 text-xs text-slate-500",children:["Actualizado ",e.createdAt.toLocaleDateString("es-CO")]})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-[11px] font-medium text-slate-500",children:[(0,a.jsx)("span",{children:"Progreso del flujo"}),(0,a.jsxs)("span",{children:[s,"%"]})]}),(0,a.jsx)("div",{className:"mt-2 h-2 rounded-full bg-slate-100",children:(0,a.jsx)("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-500 to-indigo-500 transition-all",style:{width:"".concat(s,"%")}})})]}),(0,a.jsxs)("div",{className:"mt-6 flex flex-wrap items-center justify-between gap-3",children:[(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full bg-blue-50 px-3 py-1 text-[11px] font-semibold text-blue-700",children:["Pr\xf3ximo paso: ",c.bW[t+1]?c.bW[t+1].replace(/_/g," "):"Cierre"]}),S(e.id,e.status,I)]})]},e.id)})}):(0,a.jsx)("div",{className:"rounded-3xl border border-slate-200 bg-white p-12 text-center text-slate-500",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)("svg",{className:"h-14 w-14 text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6M5 5h6l2 2h6v10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2z"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-slate-700",children:"No hay requisiciones en esta vista"}),(0,a.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"Ajusta los filtros o revisa otro estado del flujo."})]})]})}),(0,a.jsx)(l.default,{currentRole:I,children:(0,a.jsxs)("div",{className:"space-y-10",children:[(0,a.jsxs)("header",{className:"flex flex-col gap-6 rounded-3xl bg-gradient-to-r from-blue-600 via-blue-500 to-indigo-500 p-8 text-white shadow-lg",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.4em] text-white/70",children:I}),(0,a.jsx)("h1",{className:"mt-2 text-3xl font-bold leading-tight",children:(null===(e=U[I])||void 0===e?void 0:e.headline)||"Dashboard"}),(0,a.jsx)("p",{className:"mt-2 max-w-2xl text-sm text-white/80",children:null===(t=U[I])||void 0===t?void 0:t.sub})]}),"SOLICITANTE"===I&&(0,a.jsxs)(n.default,{href:"/rq/new",className:"inline-flex items-center gap-2 self-start rounded-full bg-white px-5 py-2 text-sm font-semibold text-blue-600 shadow hover:shadow-lg",children:[(0,a.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nueva requisici\xf3n"]})]}),Z.length>0&&(0,a.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Z.map(e=>(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-2xl border border-white/15 bg-white/10 px-5 py-4 shadow-sm backdrop-blur",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-br ".concat(d[e.accent]," opacity-80")}),(0,a.jsxs)("div",{className:"relative space-y-2",children:[(0,a.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.3em] text-white/70",children:e.label}),(0,a.jsx)("p",{className:"text-3xl font-bold text-white",children:e.value}),(0,a.jsx)("p",{className:"text-xs text-white/80",children:e.hint})]})]},e.label))}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-4",children:["ENVIADA_COMPRAS","EN_COMPARATIVO","EN_AUTORIZACION","APROBADA","OC_EMITIDA","EN_RECEPCION","CERRADA"].map(e=>{let t=A[e]||0;return(0,a.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/10 px-4 py-3 text-xs font-semibold uppercase tracking-wide text-white/80",children:[(0,a.jsx)("p",{className:"text-[10px] text-white/70",children:e.replace(/_/g," ")}),(0,a.jsx)("p",{className:"mt-2 text-2xl font-bold text-white",children:t})]},e)})})]}),(0,a.jsxs)("section",{className:"grid gap-8 lg:grid-cols-[2fr_1fr]",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Filtros"}),(0,a.jsxs)("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:B,className:"text-xs font-semibold uppercase tracking-widest text-slate-500",children:"Estado"}),(0,a.jsxs)("select",{id:B,value:D,onChange:e=>M("status",e.target.value),className:"mt-2 w-full rounded-xl border border-slate-200 px-3 py-2 text-sm font-medium text-slate-700 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/60",children:[(0,a.jsx)("option",{value:"",children:"Todos"}),(0,a.jsx)("option",{value:"ENVIADA_COMPRAS",children:"Enviada a Compras"}),(0,a.jsx)("option",{value:"EN_COMPARATIVO",children:"En Comparativo"}),(0,a.jsx)("option",{value:"EN_AUTORIZACION",children:"En Autorizaci\xf3n"}),(0,a.jsx)("option",{value:"APROBADA",children:"Aprobada"}),(0,a.jsx)("option",{value:"RECHAZADA",children:"Rechazada"}),(0,a.jsx)("option",{value:"OC_EMITIDA",children:"OC Emitida"}),(0,a.jsx)("option",{value:"EN_RECEPCION",children:"En Recepci\xf3n"}),(0,a.jsx)("option",{value:"CERRADA",children:"Cerrada"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:F,className:"text-xs font-semibold uppercase tracking-widest text-slate-500",children:"Proyecto"}),(0,a.jsxs)("select",{id:F,value:P,onChange:e=>M("project",e.target.value),className:"mt-2 w-full rounded-xl border border-slate-200 px-3 py-2 text-sm font-medium text-slate-700 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/60",children:[(0,a.jsx)("option",{value:"",children:"Todos"}),v.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]})]}),O>0&&(0,a.jsxs)("p",{className:"mt-3 text-xs text-slate-500",children:["Mostrando ",H,"-",W," de ",O," requisiciones"]})]}),(0,a.jsx)("div",{className:"space-y-4",children:s}),q>1&&(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[T>1&&(0,a.jsx)("button",{onClick:()=>M("page",(T-1).toString()),className:"rounded-full border border-slate-200 px-4 py-2 text-xs font-semibold text-slate-600 transition hover:border-blue-400 hover:text-blue-600",children:"Anterior"}),(0,a.jsxs)("span",{className:"rounded-full bg-slate-100 px-4 py-2 text-xs font-semibold text-slate-600",children:["P\xe1gina ",T," de ",q]}),T<q&&(0,a.jsx)("button",{onClick:()=>M("page",(T+1).toString()),className:"rounded-full border border-slate-200 px-4 py-2 text-xs font-semibold text-slate-600 transition hover:border-blue-400 hover:text-blue-600",children:"Siguiente"})]})]}),(0,a.jsxs)("aside",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold uppercase tracking-widest text-slate-500",children:"Playbook del rol"}),(0,a.jsx)("p",{className:"mt-2 text-xs text-slate-500",children:V.subtitle}),(0,a.jsx)("ol",{className:"mt-4 space-y-3 text-sm text-slate-700",children:V.steps.map((e,t)=>(0,a.jsxs)("li",{className:"flex gap-3",children:[(0,a.jsx)("span",{className:"flex h-7 w-7 flex-shrink-0 items-center justify-center rounded-full text-[11px] font-semibold uppercase tracking-wide ".concat(u[I]),children:t+1}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-slate-800",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:e.description})]})]},e.title))}),V.cta&&(0,a.jsxs)(n.default,{href:V.cta.href,className:"mt-4 inline-flex items-center gap-2 rounded-full bg-blue-600 px-4 py-2 text-xs font-semibold text-white shadow-sm transition hover:bg-blue-700",children:[(0,a.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),V.cta.label]})]}),(0,a.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white/70 p-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold uppercase tracking-widest text-slate-500",children:"Mapa del flujo"}),(0,a.jsx)("p",{className:"mt-2 text-xs text-slate-500",children:"Visualiza en qu\xe9 etapa se encuentra tu requisici\xf3n m\xe1s adelantada."}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(o.N,{currentStatus:C,compact:!0})})]}),(0,a.jsxs)("div",{className:"rounded-2xl border border-blue-100 bg-blue-50/80 p-6 text-blue-900 shadow-sm",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold uppercase tracking-widest text-blue-700",children:"Siguientes acciones"}),(0,a.jsx)("p",{className:"mt-2 text-xs text-blue-600",children:"Prioriza los pr\xf3ximos movimientos de tu bandeja."}),(0,a.jsxs)("ul",{className:"mt-4 space-y-3 text-sm",children:[z.map(e=>(0,a.jsxs)("li",{className:"rounded-xl bg-white/75 px-4 py-3 shadow-sm transition hover:shadow-md",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs font-semibold text-blue-800",children:[(0,a.jsx)("span",{children:e.code}),(0,a.jsx)("span",{className:"rounded-full bg-blue-100 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide text-blue-700",children:e.status.replace(/_/g," ")})]}),(0,a.jsx)("p",{className:"mt-1 text-xs text-blue-600",children:e.title}),(0,a.jsx)("div",{className:"mt-2 text-xs font-semibold text-blue-500",children:S(e.id,e.status,I)})]},e.id)),0===z.length&&(0,a.jsx)("li",{className:"rounded-xl bg-white/60 px-4 py-3 text-xs text-blue-600",children:"No hay acciones pendientes para este rol."})]})]}),(0,a.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-white/80 p-6",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold uppercase tracking-widest text-slate-500",children:"Notas del flujo"}),(0,a.jsx)("p",{className:"mt-2 text-xs text-slate-500",children:"Recomendaciones claves para que el proceso fluya sin retrabajos."}),L.length>0?(0,a.jsx)("ul",{className:"mt-4 space-y-3 text-xs text-slate-600",children:L.map(e=>(0,a.jsxs)("li",{className:"flex gap-3",children:[(0,a.jsx)("span",{className:"mt-1 h-2 w-2 flex-shrink-0 rounded-full bg-slate-300"}),(0,a.jsx)("span",{className:"leading-relaxed",children:e})]},e))}):(0,a.jsx)("p",{className:"mt-4 text-xs text-slate-500",children:"Mant\xe9n comunicaci\xf3n con tu equipo y registra cada cambio importante."})]})]})]})]})})}function p(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),children:(0,a.jsx)(m,{})})}},1518:function(e,t,s){"use strict";s.d(t,{N:function(){return l}});var a=s(8947),r=s(1960),i=s(3537);function l(e){let{currentStatus:t,compact:s=!1}=e,l=(0,i.Pe)(),n=function(e){if(!e)return -1;let t=e.toUpperCase(),s=i.bW.indexOf(t);return s>=0?s:"RECHAZADA"===t?i.bW.indexOf("EN_AUTORIZACION"):-1}(t),o=(null==t?void 0:t.toUpperCase())==="RECHAZADA";return(0,a.jsxs)("div",{className:(0,r.Z)("space-y-4",s&&"space-y-2"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-gray-700",children:"Flujo del proceso"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:t?"Estado actual: ".concat(t.replace(/_/g," ")):"Sin estado asignado"})]}),0===l.length?(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs font-medium text-green-700 bg-green-100 px-2 py-1 rounded-full",children:[(0,a.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Flujo validado"]}):(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs font-medium text-red-700 bg-red-100 px-2 py-1 rounded-full",children:[(0,a.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01M12 5a7 7 0 100 14 7 7 0 000-14z"})}),"Flujo requiere ajustes"]})]}),(0,a.jsx)("div",{className:(0,r.Z)("max-w-full overflow-x-auto pb-1 [-ms-overflow-style:none] [scrollbar-width:none] [&::-webkit-scrollbar]:hidden"),children:(0,a.jsx)("div",{className:(0,r.Z)("relative flex flex-col md:flex-row md:flex-wrap",s?"gap-3 md:gap-4":"gap-4 md:gap-6"),children:i.bW.map((e,t)=>{let l=i.A9[e],c=n>t,d=n===t&&!o;return(0,a.jsxs)("div",{className:(0,r.Z)("flex-1 min-w-[140px] md:flex-[1_1_180px]"),children:[(0,a.jsxs)("div",{className:(0,r.Z)("flex items-center gap-3 rounded-2xl border px-4 py-3 shadow-sm transition-colors",d&&"border-blue-500 bg-blue-50 text-blue-900 shadow",c&&!d&&"border-green-500 bg-green-50 text-green-900",!d&&!c&&"border-gray-200 bg-white text-gray-600"),children:[(0,a.jsx)("div",{className:(0,r.Z)("flex h-10 w-10 items-center justify-center rounded-full border-2 text-sm font-semibold",d&&"border-blue-500 bg-blue-100 text-blue-700",c&&!d&&"border-green-500 bg-green-100 text-green-700",!d&&!c&&"border-gray-200 bg-gray-100 text-gray-500"),children:t+1}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wider",children:l.label}),(0,a.jsx)("span",{className:"text-[11px] text-gray-500",children:l.actor})]})]}),(0,a.jsx)("p",{className:(0,r.Z)("mt-2 text-xs leading-relaxed text-gray-500",s&&"hidden md:block"),children:l.description}),o&&"EN_AUTORIZACION"===e&&(0,a.jsxs)("div",{className:"mt-2 inline-flex items-center gap-2 rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-xs text-red-700",children:[(0,a.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636a9 9 0 11-12.728 0 9 9 0 0112.728 0zM9 9l6 6m0-6l-6 6"})}),"Rechazada - volver a Compras"]})]},e)})})}),l.length>0&&(0,a.jsxs)("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-xs text-red-700",children:[(0,a.jsx)("p",{className:"font-semibold mb-1",children:"Inconsistencias detectadas en el workflow:"}),(0,a.jsx)("ul",{className:"list-disc pl-5 space-y-1",children:l.map(e=>(0,a.jsx)("li",{children:e},e))})]})]})}},1960:function(e,t,s){"use strict";t.Z=function(){for(var e,t,s=0,a="",r=arguments.length;s<r;s++)(e=arguments[s])&&(t=function e(t){var s,a,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t){if(Array.isArray(t)){var i=t.length;for(s=0;s<i;s++)t[s]&&(a=e(t[s]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a)}return r}(e))&&(a&&(a+=" "),a+=t);return a}}},function(e){e.O(0,[747,687,45,580,996,744],function(){return e(e.s=3428)}),_N_E=e.O()}]);