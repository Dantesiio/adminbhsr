"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[45],{9045:function(e,a,r){r.d(a,{default:function(){return d}});var t=r(8947),s=r(4848),i=r(3081),o=r(6834),n=r(7747),l=r(3537);function c(e){var a,r,c;let{children:d,currentRole:u}=e,{data:p}=(0,n.kP)(),x=(0,o.usePathname)(),[m,A]=(0,i.useState)(!1),h=(null==p?void 0:null===(a=p.user)||void 0===a?void 0:a.role)||u||"SOLICITANTE",b={SOLICITANTE:[{href:"/rq/new",label:"Nueva RQ"},{href:"/dashboard?role=SOLICITANTE",label:"Mis Requisiciones"}],COMPRAS:[{href:"/dashboard?role=COMPRAS",label:"RQs Pendientes"},{href:"/rq",label:"Requisiciones"},{href:"/suppliers",label:"Proveedores"}],AUTORIZADOR:[{href:"/dashboard?role=AUTORIZADOR",label:"Pendientes Autorizaci\xf3n"},{href:"/rq",label:"Listado de RQs"}],ADMIN:[{href:"/dashboard?role=ADMIN",label:"Dashboard Admin"},{href:"/projects",label:"Proyectos"},{href:"/cost-centers",label:"Centros de Costo"},{href:"/suppliers",label:"Proveedores"}]}[h]||[],f=["SOLICITANTE","COMPRAS","AUTORIZADOR","ADMIN"].includes(h)?h:"SOLICITANTE",C=(0,i.useMemo)(()=>(0,l.g0)(f),[f]);return(0,t.jsxs)("div",{className:"min-h-screen bg-slate-50 overflow-x-hidden",children:[(0,t.jsx)("header",{className:"sticky top-0 z-40 bg-gradient-to-r from-slate-900 via-blue-900 to-blue-700 pb-4 shadow-lg",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4 pt-4 sm:pt-6",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 sm:gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(s.default,{href:"/",className:"text-2xl font-bold text-white tracking-tight",children:"AdminBHSR"}),(0,t.jsx)("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1 text-xs font-semibold uppercase tracking-widest text-blue-100 backdrop-blur",children:f})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 min-w-0",children:[(0,t.jsxs)("div",{className:"flex flex-col text-xs font-medium text-blue-100",children:[(0,t.jsx)("span",{className:"mb-1 uppercase tracking-widest text-[11px] text-blue-100/80",children:"Rol activo"}),(0,t.jsx)("span",{className:"inline-flex items-center gap-2 rounded-lg border border-white/20 bg-white/10 px-3 py-1 text-xs font-semibold text-white shadow-sm",children:f})]}),(0,t.jsx)("div",{className:"hidden md:block h-4 w-px bg-white/20"}),(0,t.jsx)("span",{className:"text-xs font-medium text-blue-100",children:(null==p?void 0:null===(r=p.user)||void 0===r?void 0:r.name)||(null==p?void 0:null===(c=p.user)||void 0===c?void 0:c.email)}),(0,t.jsxs)("button",{onClick:()=>(0,n.w7)({callbackUrl:"/login"}),className:"inline-flex items-center gap-2 rounded-lg border border-white/20 px-3 py-1 text-xs font-semibold text-white transition hover:bg-white/10",children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12H3m12 0l-4 4m4-4l-4-4m9 8V8a2 2 0 00-2-2h-3"})}),"Cerrar sesi\xf3n"]})]})]}),(0,t.jsx)("nav",{className:"flex w-full items-center gap-2 overflow-x-auto pb-1 text-sm [-ms-overflow-style:none] [scrollbar-width:none] [&::-webkit-scrollbar]:hidden",children:b.map(e=>{let a=x===e.href;return(0,t.jsx)(s.default,{href:e.href,className:"inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold transition ".concat(a?"border-white bg-white text-blue-900 shadow-sm":"border-white/20 bg-white/10 text-blue-50 hover:bg-white/20"),children:e.label},e.href)})}),C.length>0&&(0,t.jsxs)("div",{className:"relative overflow-hidden rounded-2xl border border-white/10 bg-white/10 p-4 text-blue-50",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4 min-w-0",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-blue-100",children:"Gu\xeda r\xe1pida del rol"}),(0,t.jsxs)("h2",{className:"mt-1 text-base font-semibold text-white",children:["Prioridades para ",f.toLowerCase()]})]}),(0,t.jsxs)("button",{onClick:()=>A(e=>!e),className:"inline-flex items-center gap-2 rounded-full bg-white/20 px-3 py-1 text-[11px] font-semibold uppercase tracking-wide text-white transition hover:bg-white/30",children:[m?"Ocultar":"Mostrar"," detalles",(0,t.jsx)("svg",{className:"h-3 w-3 transition-transform ".concat(m?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),m&&(0,t.jsx)("ul",{className:"mt-3 space-y-2 text-xs leading-relaxed text-blue-50",children:C.map(e=>(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("svg",{className:"mt-0.5 h-4 w-4 flex-shrink-0 text-blue-200",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,t.jsx)("span",{children:e})]},e))})]})]})})}),(0,t.jsx)("main",{className:"relative pt-6 pb-10",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsx)("div",{className:"rounded-3xl border border-white/40 bg-white/90 p-6 shadow-xl backdrop-blur",children:d})})})]})}function d(e){return(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-slate-50",children:(0,t.jsxs)("div",{className:"space-y-2 text-center",children:[(0,t.jsx)("div",{className:"mx-auto h-10 w-10 animate-spin rounded-full border-2 border-blue-500 border-t-transparent"}),(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Cargando interfaz"})]})}),children:(0,t.jsx)(c,{...e})})}},3537:function(e,a,r){r.d(a,{A9:function(){return s},Pe:function(){return o},bW:function(){return t},g0:function(){return l},pd:function(){return n}});let t=["ENVIADA_COMPRAS","EN_COMPARATIVO","EN_AUTORIZACION","APROBADA","OC_EMITIDA","EN_RECEPCION","CERRADA"],s={ENVIADA_COMPRAS:{status:"ENVIADA_COMPRAS",label:"RQ enviada a Compras",description:"La requisici\xf3n fue creada por el solicitante y est\xe1 lista para gesti\xf3n de compras.",actor:"COMPRAS",guidance:["Validar que el centro log\xedstico confirm\xf3 el c\xf3digo de centro de costo.","Solicitar cotizaciones a los proveedores registrados.","Cargar cotizaciones y documentos de soporte al sistema."],next:["EN_COMPARATIVO"]},EN_COMPARATIVO:{status:"EN_COMPARATIVO",label:"En comparativo",description:"Compras recibe cotizaciones y prepara el comparativo para selecci\xf3n de proveedor.",actor:"COMPRAS",guidance:["Registrar cada cotizaci\xf3n recibida del proveedor.","Analizar precios, disponibilidad y condiciones.","Crear el comparativo con m\xednimo dos cotizaciones v\xe1lidas."],next:["EN_AUTORIZACION"],allowBackTo:"ENVIADA_COMPRAS"},EN_AUTORIZACION:{status:"EN_AUTORIZACION",label:"Pendiente de autorizaci\xf3n",description:"El comparativo se envi\xf3 a los autorizadores para revisi\xf3n y comentarios.",actor:"AUTORIZADOR",guidance:["Revisar el comparativo y la documentaci\xf3n cargada.","Completar la lista de verificaci\xf3n de presupuesto y pol\xedticas.","Registrar comentarios y decidir aprobar o rechazar."],next:["APROBADA","RECHAZADA"]},APROBADA:{status:"APROBADA",label:"Requisici\xf3n aprobada",description:"Todos los autorizadores aprobaron para generar orden de compra.",actor:"LOGISTICA",guidance:["Emitir la orden de compra referenciando la RQ y el proyecto.","Enviar la orden al proveedor seleccionado con los anexos necesarios."],next:["OC_EMITIDA"],allowBackTo:"EN_AUTORIZACION"},RECHAZADA:{status:"RECHAZADA",label:"Requisici\xf3n rechazada",description:"Alg\xfan autorizador rechaz\xf3 la RQ. Debe corregirse antes de reingresar a compras.",actor:"SOLICITANTE",guidance:["Revisar los comentarios del autorizador.","Ajustar especificaciones, cantidades o documentaci\xf3n.","Reenviar a Compras o cerrar la solicitud si ya no aplica."],next:["ENVIADA_COMPRAS"]},OC_EMITIDA:{status:"OC_EMITIDA",label:"Orden de compra emitida",description:"La orden de compra fue emitida y enviada al proveedor.",actor:"LOGISTICA",guidance:["Compartir la OC con Tesorer\xeda para programaci\xf3n de pagos.","Coordinar con el proveedor la log\xedstica de entrega.","Generar alerta de cierre parcial si aplica."],next:["EN_RECEPCION"]},EN_RECEPCION:{status:"EN_RECEPCION",label:"Recepci\xf3n en proceso",description:"Se est\xe1 validando la recepci\xf3n de bienes y facturas contra la orden de compra.",actor:"LOGISTICA",guidance:["Registrar la recepci\xf3n parcial o total en el sistema.","Notificar a Tesorer\xeda para validar pagos y anticipos.","Coordinar correcciones o devoluciones con el proveedor."],next:["CERRADA"],allowBackTo:"OC_EMITIDA"},CERRADA:{status:"CERRADA",label:"Proceso cerrado",description:"Recepci\xf3n validada, facturas conciliadas y pagos programados seg\xfan pol\xedticas.",actor:"TESORERIA",guidance:["Confirmar cierre y archivar comparativos y OC.","Actualizar el tablero de control y las m\xe9tricas.","Enviar alerta de cierre final a las \xe1reas involucradas."],next:[]}},i=["ENVIADA_COMPRAS","EN_COMPARATIVO","EN_AUTORIZACION","APROBADA","OC_EMITIDA","EN_RECEPCION","CERRADA"];function o(){let e=[];return i.forEach((a,r)=>{let t=s[a];if(!t){e.push("Estado ".concat(a," no est\xe1 definido en workflowStages"));return}let o=i[r+1];o&&!t.next.includes(o)&&e.push("El estado ".concat(a," no conecta con ").concat(o," como indica el flujo maestro"))}),Object.values(s).forEach(a=>{a.next.forEach(r=>{s[r]||e.push("El estado ".concat(a.status," apunta a un estado inexistente ").concat(r))})}),e}function n(e){if(e)return s[e]}function l(e){let a=function(e){switch(e){case"SOLICITANTE":return["ENVIADA_COMPRAS","RECHAZADA"];case"COMPRAS":return["ENVIADA_COMPRAS","EN_COMPARATIVO"];case"AUTORIZADOR":return["EN_AUTORIZACION"];default:return[...i]}}(e),r=new Set;return a.flatMap(e=>{var a;return(null===(a=s[e])||void 0===a?void 0:a.guidance)||[]}).filter(e=>!r.has(e)&&(r.add(e),!0))}}}]);